<!DOCTYPE html>
<html>

<head>
    <style>
        select {
            width: 200px;
            height: 50px;
            text-align: center;
        }

        .center-select {
            display: grid;
            justify-items: center;
        }

        .center-card {
            display: grid;
            justify-items: center;
        }

        .card {
            display: grid;
            grid-template-columns: 100px 600px 100px;
            cursor: pointer;
            margin-top: 100px;
        }

        .card-content {
            display: grid;
            font-size: 70px;

            width: 600px;
            height: 400px;

            background: #ACACAC;
            align-content: center;
            justify-content: center;

        }

        .card-content:hover {
            background: #a0a0a0;
        }

        .arrow {
            width: 100px;
            height: 400px;

            background: #ACACAC;
        }

        .arrow:hover {
            background: #a0a0a0;
        }

        .left {
            border-radius: 0px 40px 40px 0px;
        }

        .right {
            border-radius: 40px 0px 0px 40px;
        }
    </style>
</head>

<body>

    <div class="center-select">
        <div class="select-set">
            <select id="year" onchange="updateLessons()"></select>
            <select id="lesson" onchange="updateStack()"></select>
            <select id="type">
                <option>Study Reading</option>
                <option>Study Writing</option>
            </select>
        </div>
    </div>
    <div class="center-card">
        <div id="card" class="card">
            <div class="arrow right" onclick="prevCard()"></div>
            <div id="card-content" class="card-content" onclick="flipCard()"></div>
            <div class="arrow left" onclick="nextCard()"></div>
        </div>
    </div>

</body>
<script>
    const yearBox = document.getElementById("year");
    const lessonBox = document.getElementById("lesson");
    const card_content = document.getElementById("card-content");

    var data = {};
    var stack = [];
    var current_card = 0;

    // updates lesson dropdown box to match the year
    function updateLessons() {
        year = yearBox.value;

        lessonBox.options.length = 0;
        for (var lesson in data[year]) {
            let newLesson = document.createElement("OPTION");
            newLesson.text = lesson;
            newLesson.value = lesson;

            lessonBox.options.add(newLesson);
        }

        updateStack();

    }

    // updates card selection to current year and lesson
    function updateStack() {
        year = yearBox.value;
        lesson = lessonBox.value;

        stack = data[year][lesson];
        updateCard();
    }

    function updateCard() {
        card_content.innerHTML = stack[current_card][0];
    }

    function nextCard() {
        if (current_card < stack.length) {
            current_card++;
        }
        updateCard();
    }

    function prevCard() {
        if (current_card > 0) {
            current_card--;
        }
        updateCard();
    }

    function flipCard() {
        card_content.innerHTML = `${stack[current_card][1]}\n${stack[current_card][2]}`;

    }

    // fetching flashcards json from github
    fetch('flashcards.json')
        .then(response => response.json())
        .then(resp => {
            data = resp;

            // creating year dropdown box
            for (var year in data) {
                let newYear = document.createElement("OPTION");
                newYear.text = year;
                newYear.value = year;

                yearBox.options.add(newYear);
            }

            // starts at Year 1
            updateLessons("Year 1");
        })


</script>

</html>